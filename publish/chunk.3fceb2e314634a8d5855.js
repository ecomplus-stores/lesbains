(window.webpackJsonp=window.webpackJsonp||[]).push([[9,35,46],{188:function(t,e,s){"use strict";s(9),s(5),s(20),s(19),s(17),s(33),s(242);var a=s(41),o=s(57),i=s(44),r=s(38),n=s(113),c=s(58),l=s(120),u=s(43),d=s(7),m=s(14),p=s(209),_=s(210),f=s(211),g=s(42),h=s(189);const v=(t,e)=>{if("object"==typeof window){t=`productCard${t}Html`;const s="function"==typeof window[t]?window[t](e):window[t];if("string"==typeof s)return s}};var b={name:"ProductCard",components:{ALink:p.a,APicture:_.a,APrices:f.a},props:{product:Object,productId:String,isSmall:Boolean,headingTag:{type:String,default:"h3"},buyText:String,transitionClass:{type:String,default:"animated fadeIn"},canAddToCart:{type:Boolean,default:!0},ecomPassport:{type:Object,default:()=>g.default},accountUrl:{type:String,default:"/app/#/account/"},isLoaded:Boolean,installmentsOption:Object,discountOption:Object},data:()=>({body:{},isLoading:!1,isWaitingBuy:!1,isHovered:!1,isFavorite:!1,selectedPicture:!1,variationImagesKey:Math.random().toString(),apx_tags:[],apx_productTags:{},rng:Math.random().toString(),error:"",selectedColor:!1}),computed:{i19addToFavorites:()=>Object(o.a)(a.m),i19outOfStock:()=>Object(o.a)(a.Qc),i19unavailable:()=>Object(o.a)(a.ge),i19uponRequest:()=>"Sob consulta",isWithoutPrice(){return!Object(i.a)(this.body)},ratingHtml(){return v("Rating",this.body)},buyHtml(){return v("Buy",this.body)},footerHtml(){return v("Footer",this.body)},name(){return Object(r.a)(this.body)},strBuy(){return this.buyText||"object"==typeof window&&window.productCardBuyText||Object(o.a)(a.y)},isInStock(){return Object(n.a)(this.body)},isActive(){return this.body.available&&this.body.visible&&this.isInStock},isLogged:()=>g.default.checkAuthorization(),discount(){const{body:t}=this;return Object(c.a)(t)?Math.round(100*(t.base_price-Object(i.a)(t))/t.base_price):0}},methods:{getTags(){return this.apx_productTags},setTags(){if(this.body.categories){let t=this.body.categories.map((t=>"cat_"+t._id));t.push(this.body.sku),this.apx_tags.filter((e=>t.some((t=>e.identificador.includes(t))))).forEach((t=>{this.apx_productTags[t.type]||(this.apx_productTags[t.type]=[]),this.apx_productTags[t.type]=[...this.apx_productTags[t.type],t]})),this.apx_productTags={...this.apx_productTags},this.body.quantity<10&&(this.apx_productTags.top_left=[]),this.apx_productTags.top_left&&this.apx_productTags.top_left.push({identificador:[this.body.sku],type:"top_left",title:"Ãšltimas Unidades",description:"",color:"red",border:"red"}),console.log("tags",JSON.stringify(this.apx_productTags))}},setListingItemImages(t){let e=this.body.variations.find((e=>e.specifications.colors.some((e=>e.text===t)))),s=!1;e.picture_id&&(s=this.body.pictures.find((t=>t._id==e.picture_id))),this.selectedPicture=s,this.variationImagesKey=Math.random().toString(),this.selectedColor=t},getCMSPropInfo:t=>window.apx_properties.find((e=>e.title.trim()==t.trim())),getHexColor(t){return console.log(this.body.variations),this.body.variations.find((e=>e.specifications.colors.some((e=>e.text.trim().toLowerCase()===t.trim().toLowerCase()))))},setBody(t){this.body=Object.assign({},t),delete this.body.body_html,delete this.body.body_text,delete this.body.inventory_records,delete this.body.price_change_records,this.isFavorite=Object(h.checkFavorite)(this.body._id,this.ecomPassport),this.body.variationsGrids=Object(l.a)(this.body,{},!0)},fetchItem(){this.productId&&(this.isLoading=!0,Object(d.g)({url:`/products/${this.productId}.json`}).then((t=>{let{data:e}=t;this.$emit("update:product",e),this.setBody(e),this.$emit("update:is-loaded",!0)})).catch((t=>{console.error(t),this.body.name&&this.body.slug&&this.body.pictures||(this.error=Object(o.a)(a.V))})).finally((()=>{this.isLoading=!1})))},isMobile:()=>window.innerWidth<990,toggleFavorite(){this.isFavorite=Object(h.toggleFavorite)(this.body._id,this.ecomPassport)},buy(){const t=this.body;this.$emit("buy",{product:t}),this.canAddToCart&&(this.isWaitingBuy=!0,Object(d.g)({url:`/products/${t._id}.json`}).then((e=>{let{data:a}=e;const o=["variations","customizations","kit_composition"];for(let t=0;t<o.length;t++){const e=a[o[t]];if(e&&e.length)return Promise.all([s.e(0),s.e(3),s.e(2),s.e(20),s.e(27)]).then(s.bind(null,535)).then((t=>{new u.a({render:e=>e(t.default,{props:{product:a}})}).$mount(this.$refs.quickview)}))}const{quantity:i,price:r}=a;m.a.addProduct({...t,quantity:i,price:r})})).catch((e=>{console.error(e),window.location=`/${t.slug}`})).finally((()=>{this.isWaitingBuy=!1})))}},created(){this.product&&(this.setBody(this.product),void 0===this.product.available&&(this.body.available=!0),void 0===this.product.visible&&(this.body.visible=!0)),this.isLoaded||this.fetchItem()},mounted(){this.apx_tags=[...window.apx_tags],this.setTags()}};e.a=b},189:function(t,e,s){"use strict";s.r(e),s.d(e,"toggleFavorite",(function(){return o})),s.d(e,"checkFavorite",(function(){return i}));s(9);var a=s(42);const o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default;const s=e.getCustomer(),o=new EcomSearch,r=s.favorites||[],n=i(t,e);if(console.log("favorite-products",s.favorites,!!s.favorites),null!=s.display_name){if(n){const e=r.indexOf(t);r.splice(e,1),window.messageBullet("Removido dos favoritos")}else r.push(t),window.messageBullet("Adicionado aos favoritos");return e.requestApi("/me.json","patch",{favorites:r}),o.setProductIds(r).fetch().then((t=>{$(".favorite-count").text(t.hits.hits.length)})),!n}{let e=localStorage.getItem("apxLocalFavorites");if(e=e?JSON.parse(e):[],n){const s=e.indexOf(t);e.splice(s,1),window.messageBullet("Removido dos favoritos")}else e.push(t),window.messageBullet("Adicionado aos favoritos");return localStorage.setItem("apxLocalFavorites",JSON.stringify(e)),o.setProductIds(e).fetch().then((t=>{$(".favorite-count").text(t.hits.hits.length)})),!n}},i=(t,e)=>{if(e.getCustomer().display_name){const{favorites:s}=e.getCustomer();return s&&s.includes(t)}{let e=localStorage.getItem("apxLocalFavorites");return e=null==e?[]:JSON.parse(e),e&&e.includes(t)}}},198:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return o}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-card",class:{"product-card--inactive":t.body._id&&!t.isActive,"product-card--small":t.isSmall},attrs:{"data-product-id":t.body._id,"data-sku":t.body.sku},on:{mouseover:function(e){t.isHovered=!0}}},[s("transition",{attrs:{"enter-active-class":t.transitionClass}},[t.isLoading?t._e():s("section",[t._t("discount-tag",(function(){return[t.isActive&&t.discount>0?s("span",{staticClass:"product-card__offer-stamp"},[s("i",{staticClass:"i-arrow-down"}),t._v(" "),s("b",[t._v(t._s(t.discount))]),t._v("% ")]):t._e()]}),null,{discount:t.discount}),t._t("stamps"),t._t("body",(function(){return[s("a-link",{staticClass:"product-card__link position-relative",attrs:{href:"/"+t.body.slug,title:t.name}},[t.getTags()?s("div",{key:t.rng,staticClass:"apx_tags"},t._l(t.getTags(),(function(e,a){return s("div",{key:a,class:a},t._l(e,(function(e,a){return s("div",[e.img?t._e():s("span",{staticClass:"text_tag",style:"--bg_:"+e.background_color+"; --cl_:"+e.color+";--bd_:"+e.border},[t._v(" "+t._s(e.title)+" ")])])})),0)})),0):t._e(),t._t("header"),s("div",{staticClass:"product-card__pictures"},[t.selectedPicture?s("a-picture",{key:t.variationImagesKey,staticClass:"product-card__picture",attrs:{src:t.selectedPicture,"can-calc-height":!1,containerBreakpoints:{zoom:null,big:400,normal:200}}}):t._l(t.body.pictures.slice(0,1).reverse(),(function(t,e){return s("a-picture",{key:e,staticClass:"product-card__picture",attrs:{containerBreakpoints:{zoom:null,big:400,normal:200},src:t,"can-calc-height":!1}})}))],2)],2)]})),s("div",{staticClass:"p-md-3 p-2"},[s("div",{staticClass:"d-flex justify-content-between align-items-start"},[s("div",[t._t("title",(function(){return[s("span",[s("a-link",{staticClass:"product-card__name-link",attrs:{href:"/"+t.body.slug,title:t.name}},[s(t.headingTag,{tag:"component",staticClass:"product-card__name",domProps:{innerHTML:t._s(t.name)}})],1)],1)]})),t._t("rating",(function(){return[t._m(0)]})),t.body.available&&t.body.visible?t.isInStock?t._e():t._t("out-of-stock",(function(){return[s("p",{staticClass:"badge badge-dark mt-auto"},[t._v(" "+t._s(t.i19outOfStock)+" ")])]})):t._t("unavailable",(function(){return[s("p",{staticClass:"badge badge-warning mt-auto"},[t._v(" "+t._s(t.i19unavailable)+" ")])]})),t.isWithoutPrice?t._t("without-price",(function(){return[s("p",{staticClass:"badge badge-info mt-auto"},[t._v(" "+t._s(t.i19uponRequest)+" ")])]})):[t._t("prices",(function(){return[s("a-prices",{staticClass:"product-card__prices text-right justify-content-end align-items-center d-flex gap-1 flex-row",attrs:{product:t.body,"installments-option":t.installmentsOption,"discount-option":t.discountOption}})]})),t._e()]],2),t.body.variationsGrids&&t.body.variationsGrids.colors?s("div",{staticClass:"apx_listing_colors"},[t._l(t.body.variationsGrids.colors.slice(0,t.isMobile()?1:3),(function(e){return s("button",{class:t.selectedColor==e?"selected":"",attrs:{type:"button",title:e},on:{click:function(s){return t.setListingItemImages(e)}}},[t.getCMSPropInfo(e)&&t.getCMSPropInfo(e).img?s("span",{staticClass:"cms_ico color"},[s("img",{attrs:{src:t.getCMSPropInfo(e).img}})]):t.getCMSPropInfo(e)&&(t.getCMSPropInfo(e).color_1||t.getCMSPropInfo(e).color_2||t.getCMSPropInfo(e).color_3)?s("span",{staticClass:"cms_ico color"},[t.getCMSPropInfo(e).color_1?s("span",{style:"background-color:"+t.getCMSPropInfo(e).color_1}):t._e(),t.getCMSPropInfo(e).color_2?s("span",{style:"background-color:"+t.getCMSPropInfo(e).color_2}):t._e(),t.getCMSPropInfo(e).color_3?s("span",{style:"background-color:"+t.getCMSPropInfo(e).color_3}):t._e()]):t.getHexColor(e)&&t.getHexColor(e).specifications.colors&&t.getHexColor(e).specifications.colors[0].value?s("span",{staticClass:"color",style:"background-color:"+t.getHexColor(e).specifications.colors[0].value}):t._e()])})),t.body.variationsGrids.colors.length>3?s("span",[t._v("+"+t._s(t.body.variationsGrids.colors.length-(t.isMobile()?1:3)))]):t._e()],2):t._e()])]),t._t("favorite",(function(){return[s("a",{staticClass:"btn product-card__favorite fade",style:t.isFavorite?"opacity:1":null,attrs:{href:null},on:{click:t.toggleFavorite}},[s("span",{class:t.isFavorite?"active":null},[s("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M7.5 7.5C7.5 6.11929 8.61929 5 10 5H20C21.3807 5 22.5 6.11929 22.5 7.5V26.25L15 18.75L7.5 26.25V7.5Z",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round"}})])])])]})),t._t("footer",(function(){return[t.footerHtml?s("div",{domProps:{innerHTML:t._s(t.footerHtml)}}):t._e()]}))],2)]),t.isLoading?[t._t("default"),t.error?s("div",{staticClass:"alert alert-warning small",attrs:{role:"alert"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]:t._e(),s("div",{ref:"quickview"})],2)},o=[function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"product-card__rating",attrs:{"data-sku":t.body.sku},domProps:{innerHTML:t._s(t.ratingHtml)}})}]},287:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return o}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.item.customizations&&t.item.customizations.length?s("div",{staticClass:"item-customizations small"},t._l(t.item.customizations,(function(e){var a=e._id,o=e.label,i=e.option;return s("div",{key:"cs-"+a},[s("span",{staticClass:"text-muted"},[t._v(" "+t._s(o)+": ")]),/\.(doc|jpg|jpeg|png)$/i.test(i.text)?s("a",{staticStyle:{"border-bottom":"1px solid","font-size":"12px",display:"flex","align-items":"center",gap:"5px",width:"fit-content","margin-top":"5px"},attrs:{href:"https://storage.googleapis.com/alpix-dd540.appspot.com/Image/"+i.text.split(".")[0]+"/"+i.text,target:"_blank"}},[t._v(" Abrir Arquivo "),s("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M5.33333 7.99998H10.6667M6 5.33331H4.66667C3.19391 5.33331 2 6.52722 2 7.99998C2 9.47274 3.19391 10.6666 4.66667 10.6666H6M10 10.6666H11.3333C12.8061 10.6666 14 9.47274 14 7.99998C14 6.52722 12.8061 5.33331 11.3333 5.33331L10 5.33331",stroke:"black","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])]):s("span",[t._v(t._s(i.text))])])})),0):t._e()},o=[]},308:function(t,e,s){"use strict";var a=s(41),o=s(40),i=s(57),r=s(112),n=s(125),c=s(124),l=s(48),u=s.n(l),d=s(330),m=s(306),p=s(397),_=s(338);const f=o.$ecomConfig.get("country_code"),{sessionStorage:g}=window,h="ecomCustomerAccount",v=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":invalid";return document.querySelectorAll(`.account-form input${t}`).length},b="was-validated";var C={name:"AccountForm",components:{InputDocNumber:m.a,InputPhone:p.a,InputDate:_.a},props:{isShort:Boolean,isGuestAccess:Boolean,customer:{type:Object,default:()=>({})},privacyPolicyUrl:{type:String,default:"object"==typeof window?window.privacyPolicyUrl:null},hasSubmitBtn:{type:Boolean,default:!0},btnText:{type:String,default:Object(i.a)(a.xd)}},data(){return{localCustomer:u()(this.customer),fullName:Object(r.a)(this.customer),storageInterval:null,btnLabel:this.btnText||Object(i.a)(a.xd),isPrivacyOptIn:Boolean(this.customer._id)}},computed:{i19a:()=>Object(i.a)(a.f),i19birthdate:()=>Object(i.a)(a.v),i19cellphone:()=>Object(i.a)(a.I),i19companyRegistration:()=>Object(i.a)(a.S),i19contactPhone:()=>Object(i.a)(a.W),i19corporateName:()=>Object(i.a)(a.cb),i19docNumber:()=>Object(i.a)(a.lb),i19emailAddress:()=>Object(i.a)(a.ob),i19female:()=>Object(i.a)(a.xb),i19fullName:()=>Object(i.a)(a.Gb),i19Gender:()=>Object(i.a)(a.c),i19inscriptionNumber:()=>Object(i.a)(a.Sb),i19InscriptionType:()=>Object(i.a)(a.d),i19iReadAndAccept:()=>Object(i.a)(a.Pb),i19male:()=>Object(i.a)(a.ic),i19nickname:()=>Object(i.a)(a.uc),i19emailMarketingOptInMsg:()=>Object(i.a)(a.pb),i19personalRegistration:()=>Object(i.a)(a.Wc),i19privacyPolicy:()=>Object(i.a)(a.cd),birthdate:{get(){return Object(n.a)(this.localCustomer)},set(t){if(8===t.length){const e=(e,s)=>parseInt(t.substr(e,s),10);let s,a,o;"BR"===f?(s=e(0,2),a=e(2,2),o=e(4,4)):(s=e(6,2),a=e(4,2),o=e(0,4));const i=(new Date).getFullYear();o<i-125?o=i-125:o>i&&(o=i),this.localCustomer.birth_date={day:s,month:a,year:o}}}},phoneNumber:{get(){return this.getPhoneStr(0)},set(t){this.localCustomer.phones[0]=this.parsePhoneStr(t)}},secondPhoneNumber:{get(){return this.getPhoneStr(1)},set(t){const{phones:e}=this.localCustomer;e[e.length>0?1:0]=this.parsePhoneStr(t)}}},methods:{getPhoneStr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{phones:e}=this.localCustomer;return e[t]&&"*"!==e[t].number.charAt(0)?Object(c.a)(this.localCustomer.phones[t]):""},parsePhoneStr(t){let e,s;"+"===t.charAt(0)?(e=parseInt(t.substr(1,2)),s=t.substr(3)):s=t;const a={number:s};return e>=1&&e<=999&&(a.country_code=e),a},update(){this.$el.checkValidity()&&this.$emit("update:customer",this.localCustomer)},mergeLocalCustomer(t){for(const e in t)if(t[e]){const s=this.localCustomer[e];(!s||"object"==typeof s&&!Object.keys(s).length||["addresses","orders","loyalty_points_entries"].includes(e))&&("name"===e?this.fullName=Object(r.a)({name:t[e]}):this.localCustomer[e]=t[e])}},saveToStorage(){g.setItem(h,JSON.stringify(this.localCustomer))},submit(){this.$nextTick((()=>{const t=this.$el;v(".is-invalid")?t.classList.remove(b):(this.localCustomer.display_name||(this.localCustomer.display_name=this.localCustomer.name.given_name),Object(d.a)(t)?(this.saveToStorage(),this.save()):t.classList.contains(b)&&!v()&&this.save(),t.classList.add(b))}))},save(){this.update(),this.$emit("submit",this.localCustomer),this.btnLabel=Object(i.a)(a.yd)+"...",setTimeout((()=>{this.btnLabel=this.btnText}),3e3)}},watch:{fullName(t){const e=t.replace(/\s{2,}/g," ");if(e!==this.fullName)this.fullName=e;else{const t=e.trim().split(" ");this.localCustomer.name={given_name:t.shift()};const{name:s}=this.localCustomer;t.length&&(s.family_name=t.pop(),t.length&&(s[s.family_name?"middle_name":"family_name"]=t.join(" ")))}},customer:{handler(){this.mergeLocalCustomer(this.customer)},deep:!0},localCustomer:{handler(){this.isGuestAccess&&this.$nextTick(this.update)},deep:!0}},created(){const t=JSON.parse(g.getItem(h));t&&this.mergeLocalCustomer(t),this.storageInterval=setInterval((()=>{Object.keys(this.localCustomer).length&&this.saveToStorage()}),7e3),this.localCustomer._id||(this.localCustomer.accepts_marketing=!0)},mounted(){console.log("this.btnText",this.btnText,this.btnLabel);const t=this.$el.querySelectorAll("input");for(let e=0;e<t.length;e++)if(!t[e].value){t[e].focus();break}},destroyed(){clearInterval(this.storageInterval)}};e.a=C},332:function(t,e,s){"use strict";s.r(e);s(9),s(137);var a=s(41),o=s(57),i={name:"APagination",props:{totalItems:{type:Number,required:!0},page:{type:Number,default:1},pageSize:{type:Number,default:24}},computed:{i19next:()=>Object(o.a)(a.tc),i19previous:()=>Object(o.a)(a.ad),totalPages(){return Math.ceil(this.totalItems/this.pageSize)},pageNums(){const t=[];if(this.totalPages>0){let e;for(let s=-2;s<=2;s++)if(e=this.page+s,e>=1){if(!(e<=this.totalPages))break;t.push(e)}3===t[0]?t.unshift(1,2):2===t[0]&&t.unshift(1),e===this.totalPages-2?t.push(e+1,e+2):e===this.totalPages-1&&t.push(e+1)}return t},lastPageNum(){return this.pageNums[this.pageNums.length-1]}},methods:{go(t){t>=1&&t<=this.totalPages&&this.$emit("update:page",t)}}},r=s(71),n=Object(r.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"d-flex"},[s("ul",{staticClass:"pagination mr-2"},[s("li",{staticClass:"page-item",class:t.page<=1?"disabled":null},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-disabled":t.page<=1||null},on:{click:function(e){return e.preventDefault(),t.go(t.page-1)}}},[t._v(" Â« "+t._s(t.i19previous)+" ")])]),s("li",{staticClass:"page-item",class:t.page>=t.totalPages?"disabled":null},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-disabled":t.page>=t.totalPages||null},on:{click:function(e){return e.preventDefault(),t.go(t.page+1)}}},[t._v(" "+t._s(t.i19next)+" Â» ")])])]),s("ul",{staticClass:"pagination d-none d-lg-flex"},[t.pageNums[0]>1?[s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.go(1)}}},[t._v(" 1 ")])]),t._m(0)]:t._e(),t._l(t.pageNums,(function(e){return s("li",{key:"p"+e,staticClass:"page-item",class:t.page===e?"active":null},[t.page!==e?s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.go(e)}}},[t._v(" "+t._s(e)+" ")]):s("span",{staticClass:"page-link",attrs:{"aria-current":"page"}},[t._v(" "+t._s(e)+" ")])])})),t.lastPageNum<t.totalPages?[t._m(1),s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.go(t.totalPages)}}},[t._v(" "+t._s(t.totalPages)+" ")])])]:t._e()],2)])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"page-item disabled"},[s("span",{staticClass:"page-link"},[t._v(" ... ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"page-item disabled"},[s("span",{staticClass:"page-link"},[t._v(" ... ")])])}],!1,null,null,null);e.default=n.exports},387:function(t,e,s){var a=s(497);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,s(195).default)("405957c1",a,!0,{})},388:function(t,e,s){var a=s(499);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,s(195).default)("4f248663",a,!0,{})},389:function(t,e,s){var a=s(501);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,s(195).default)("735f70c0",a,!0,{})},406:function(t,e,s){"use strict";s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return o}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"account-form needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"account-form-email"}},[t._v(" "+t._s(t.i19emailAddress)+" ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.localCustomer.main_email,expression:"localCustomer.main_email",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"email",pattern:"\\S+@\\S+\\.\\S{2,}",id:"account-form-email",placeholder:"email@mail.com",required:""},domProps:{value:t.localCustomer.main_email},on:{input:function(e){e.target.composing||t.$set(t.localCustomer,"main_email",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-lg-8"},[s("label",{attrs:{for:"account-form-name"}},[t._v(" "+t._s(t.i19fullName)+" ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.fullName,expression:"fullName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",pattern:"[^\\d\\s]{2,}[\\s][^\\d\\s]{2,}.*",id:"account-form-name",required:""},domProps:{value:t.fullName},on:{input:function(e){e.target.composing||(t.fullName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.isShort?t._e():s("div",{staticClass:"form-group col-lg-4"},[s("label",{attrs:{for:"account-form-nickname"}},[t._v(" "+t._s(t.i19nickname)+" ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.localCustomer.display_name,expression:"localCustomer.display_name",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",pattern:"[^\\d\\s]{2,}.*",id:"account-form-nickname"},domProps:{value:t.localCustomer.display_name},on:{input:function(e){e.target.composing||t.$set(t.localCustomer,"display_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),t.isShort?t._e():s("div",{staticClass:"form-group"},t._l(t.i19Gender,(function(e,a){return s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.gender,expression:"localCustomer.gender"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"account-form-gender",id:"account-form-gender-"+a},domProps:{value:a,checked:t._q(t.localCustomer.gender,a)},on:{change:function(e){return t.$set(t.localCustomer,"gender",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"account-form-gender-"+a}},[t._v(" "+t._s(e)+" ")])])})),0),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-lg-4"},[s("label",{attrs:{for:"account-form-phone"}},[t._v(" "+t._s(t.i19contactPhone)+" ")]),s("input-phone",{attrs:{id:"account-form-phone",required:""},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber=e},expression:"phoneNumber"}})],1),t.isShort?t._e():s("div",{staticClass:"form-group col-lg-4"},[s("label",{attrs:{for:"account-form-cell"}},[t._v(" "+t._s(t.i19cellphone)+" ")]),s("input-phone",{attrs:{id:"account-form-cell"},model:{value:t.secondPhoneNumber,callback:function(e){t.secondPhoneNumber=e},expression:"secondPhoneNumber"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isGuestAccess,expression:"!isGuestAccess"}],staticClass:"form-group col-lg-4"},[s("label",{attrs:{for:"account-form-birth"}},[t._v(" "+t._s(t.i19birthdate)+" ")]),s("input-date",{attrs:{id:"account-form-birth"},model:{value:t.birthdate,callback:function(e){t.birthdate=e},expression:"birthdate"}})],1)]),s("div",{staticClass:"form-group"},t._l({p:t.i19personalRegistration,j:t.i19companyRegistration},(function(e,a){return s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.registry_type,expression:"localCustomer.registry_type"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"account-form-type",id:"account-form-type-"+a,required:""},domProps:{value:a,checked:t._q(t.localCustomer.registry_type,a)},on:{change:function(e){return t.$set(t.localCustomer,"registry_type",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"account-form-type-"+a}},[t._v(" "+t._s(e)+" ")])])})),0),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-lg-6"},[s("label",{attrs:{for:"account-form-doc"}},[t._v(" "+t._s(t.i19docNumber)+" ")]),s("input-doc-number",{attrs:{id:"account-form-doc",isCompany:"p"!==t.localCustomer.registry_type,required:""},model:{value:t.localCustomer.doc_number,callback:function(e){t.$set(t.localCustomer,"doc_number",e)},expression:"localCustomer.doc_number"}})],1)]),"p"!==t.localCustomer.registry_type?s("div",{staticClass:"account-form__legal-person"},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-lg-8"},[s("label",{attrs:{for:"account-form-name"}},[t._v(" "+t._s(t.i19corporateName)+" ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.localCustomer.corporate_name,expression:"localCustomer.corporate_name",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",pattern:"[\\w-]{1,}[\\s][\\w-]{1,}.*",minlength:"4",id:"account-form-name",required:""},domProps:{value:t.localCustomer.corporate_name},on:{input:function(e){e.target.composing||t.$set(t.localCustomer,"corporate_name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),s("div",{staticClass:"form-row account-form__inscription"},[s("div",{staticClass:"form-group col-lg-6"},[s("label",{attrs:{for:"account-form-inscription"}},[t._v(" "+t._s(t.i19inscriptionNumber)+" ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.localCustomer.inscription_number,expression:"localCustomer.inscription_number",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",maxlength:"50",id:"account-form-inscription"},domProps:{value:t.localCustomer.inscription_number},on:{input:function(e){e.target.composing||t.$set(t.localCustomer,"inscription_number",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"form-group col-lg-5 pb-lg-2 ml-lg-2"},t._l(t.i19InscriptionType,(function(e,a){return s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.inscription_type,expression:"localCustomer.inscription_type"}],staticClass:"custom-control-input",attrs:{type:"radio",name:"account-form-gender",id:"account-form-gender-"+a},domProps:{value:a,checked:t._q(t.localCustomer.inscription_type,a)},on:{change:function(e){return t.$set(t.localCustomer,"inscription_type",a)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"account-form-gender-"+a}},[t._v(" "+t._s(e)+" ")])])})),0)])]):t._e(),s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.localCustomer.accepts_marketing,expression:"localCustomer.accepts_marketing"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"account-form-marketing"},domProps:{checked:Array.isArray(t.localCustomer.accepts_marketing)?t._i(t.localCustomer.accepts_marketing,null)>-1:t.localCustomer.accepts_marketing},on:{change:function(e){var s=t.localCustomer.accepts_marketing,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&t.$set(t.localCustomer,"accepts_marketing",s.concat([null])):i>-1&&t.$set(t.localCustomer,"accepts_marketing",s.slice(0,i).concat(s.slice(i+1)))}else t.$set(t.localCustomer,"accepts_marketing",o)}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"account-form-marketing"}},[t._v(" "+t._s(t.i19emailMarketingOptInMsg)+" ")])])]),t.isGuestAccess?t._e():[t.privacyPolicyUrl?s("div",{staticClass:"form-group"},[s("div",{staticClass:"custom-control custom-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.isPrivacyOptIn,expression:"isPrivacyOptIn"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"account-form-privacy-policy",required:""},domProps:{checked:Array.isArray(t.isPrivacyOptIn)?t._i(t.isPrivacyOptIn,null)>-1:t.isPrivacyOptIn},on:{change:function(e){var s=t.isPrivacyOptIn,a=e.target,o=!!a.checked;if(Array.isArray(s)){var i=t._i(s,null);a.checked?i<0&&(t.isPrivacyOptIn=s.concat([null])):i>-1&&(t.isPrivacyOptIn=s.slice(0,i).concat(s.slice(i+1)))}else t.isPrivacyOptIn=o}}}),s("label",{staticClass:"custom-control-label",attrs:{for:"account-form-privacy-policy"}},[t._v(" "+t._s(t.i19iReadAndAccept)+" "+t._s(t.i19a)+" "),s("a",{attrs:{href:t.privacyPolicyUrl,target:"_blank"},domProps:{textContent:t._s(t.i19privacyPolicy)}}),t._v(". ")])])]):t._e()],t.hasSubmitBtn?s("button",{staticClass:"btn btn-lg btn-primary",attrs:{type:"submit"}},[s("i",{staticClass:"i-arrow-right mr-1"}),t._v(" "+t._s(t.btnLabel)+" ")]):t._e()],2)},o=[]},496:function(t,e,s){"use strict";s(387)},497:function(t,e,s){(e=s(194)(!0)).push([t.i,".account__greetings i,.account__greetings svg{color:var(--success);margin-right:var(--spacer-1)}.account__logout{color:var(--text-muted);margin:var(--spacer-3) 0}.account__logout a{color:var(--danger);margin:0 var(--spacer-2)}.account__nav{display:flex;flex-wrap:nowrap;margin-top:var(--spacer-5);overflow-x:auto;overflow-y:hidden}.account__content{padding-top:var(--spacer-5);position:relative}","",{version:3,sources:["TheAccount.scss"],names:[],mappings:"AAAA,8CAA8C,oBAAoB,CAAC,4BAA4B,CAAC,iBAAiB,uBAAuB,CAAC,wBAAwB,CAAC,mBAAmB,mBAAmB,CAAC,wBAAwB,CAAC,cAAc,YAAY,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,eAAe,CAAC,iBAAiB,CAAC,kBAAkB,2BAA2B,CAAC,iBAAiB",file:"TheAccount.scss",sourcesContent:[".account__greetings i,.account__greetings svg{color:var(--success);margin-right:var(--spacer-1)}.account__logout{color:var(--text-muted);margin:var(--spacer-3) 0}.account__logout a{color:var(--danger);margin:0 var(--spacer-2)}.account__nav{display:flex;flex-wrap:nowrap;margin-top:var(--spacer-5);overflow-x:auto;overflow-y:hidden}.account__content{padding-top:var(--spacer-5);position:relative}"]}]),t.exports=e},498:function(t,e,s){"use strict";s(388)},499:function(t,e,s){(e=s(194)(!0)).push([t.i,".account-points__entry small{text-transform:lowercase}.account-points__info{align-items:center;display:flex;justify-content:space-between}.account-points__entry-title{display:flex;justify-content:space-between;width:100%}","",{version:3,sources:["AccountPoints.scss"],names:[],mappings:"AAAA,6BAA6B,wBAAwB,CAAC,sBAAsB,kBAAkB,CAAC,YAAY,CAAC,6BAA6B,CAAC,6BAA6B,YAAY,CAAC,6BAA6B,CAAC,UAAU",file:"AccountPoints.scss",sourcesContent:[".account-points__entry small{text-transform:lowercase}.account-points__info{align-items:center;display:flex;justify-content:space-between}.account-points__entry-title{display:flex;justify-content:space-between;width:100%}"]}]),t.exports=e},500:function(t,e,s){"use strict";s(389)},501:function(t,e,s){(e=s(194)(!0)).push([t.i,".orders-list{margin:0 auto;max-width:700px}@media(min-width:768px){.orders-list__item{display:flex;justify-content:space-between}.orders-list__item>div{flex:1.4 1 0}.orders-list__item>span{flex:1.4 1 0;text-align:right}}.orders-list__item:hover .orders-list__number{text-decoration:underline}.orders-list__number{border-left:.5rem solid var(--primary-lightest);color:var(--primary);padding:0 1rem}.orders-list__number--open{border-left-color:var(--info)}.orders-list__number--closed{border-left-color:var(--success)}.orders-list__number--cancelled{border-left-color:var(--danger)}.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{color:var(--info);font-weight:var(--font-bold)}@media(max-width:767.98px){.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{float:right}}.orders-list__status--closed{color:var(--success)}.orders-list__status--cancelled{color:var(--danger)}.orders-list__financial-status--pending{color:var(--warning)}.orders-list__financial-status--in_dispute,.orders-list__financial-status--unauthorized,.orders-list__financial-status--voided{color:var(--danger)}.orders-list__financial-status--paid,.orders-list__fulfillment-status--delivered{color:var(--success)}","",{version:3,sources:["EcOrdersList.scss"],names:[],mappings:"AAAA,aAAa,aAAa,CAAC,eAAe,CAAC,wBAAwB,mBAAmB,YAAY,CAAC,6BAA6B,CAAC,uBAAuB,YAAY,CAAC,wBAAwB,YAAY,CAAC,gBAAgB,CAAC,CAAC,8CAA8C,yBAAyB,CAAC,qBAAqB,+CAA+C,CAAC,oBAAoB,CAAC,cAAc,CAAC,2BAA2B,6BAA6B,CAAC,6BAA6B,gCAAgC,CAAC,gCAAgC,+BAA+B,CAAC,qFAAqF,iBAAiB,CAAC,4BAA4B,CAAC,2BAA2B,qFAAqF,WAAW,CAAC,CAAC,6BAA6B,oBAAoB,CAAC,gCAAgC,mBAAmB,CAAC,wCAAwC,oBAAoB,CAAC,+HAA+H,mBAAmB,CAAC,iFAAiF,oBAAoB",file:"EcOrdersList.scss",sourcesContent:[".orders-list{margin:0 auto;max-width:700px}@media(min-width:768px){.orders-list__item{display:flex;justify-content:space-between}.orders-list__item>div{flex:1.4 1 0}.orders-list__item>span{flex:1.4 1 0;text-align:right}}.orders-list__item:hover .orders-list__number{text-decoration:underline}.orders-list__number{border-left:.5rem solid var(--primary-lightest);color:var(--primary);padding:0 1rem}.orders-list__number--open{border-left-color:var(--info)}.orders-list__number--closed{border-left-color:var(--success)}.orders-list__number--cancelled{border-left-color:var(--danger)}.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{color:var(--info);font-weight:var(--font-bold)}@media(max-width:767.98px){.orders-list__financial-status,.orders-list__fulfillment-status,.orders-list__status{float:right}}.orders-list__status--closed{color:var(--success)}.orders-list__status--cancelled{color:var(--danger)}.orders-list__financial-status--pending{color:var(--warning)}.orders-list__financial-status--in_dispute,.orders-list__financial-status--unauthorized,.orders-list__financial-status--voided{color:var(--danger)}.orders-list__financial-status--paid,.orders-list__fulfillment-status--delivered{color:var(--success)}"]}]),t.exports=e},526:function(t,e,s){"use strict";s.r(e);s(9);var a=s(42),o=s(138),i=(s(5),s(242),s(41)),r=s(57),n=s(123),c=s(396),l=s(307),u={name:"TheAccount",components:{LoginBlock:c.a,RecommendedItems:l.a},props:{customer:{type:Object,default:()=>({})},currentTab:{type:String,validator:function(t){return["orders","favorites","subscriptions","points","account"].includes(t)}},isExternalAuth:{type:Boolean,default:()=>Boolean(window.$firebaseConfig&&window.$firebaseConfig.authDomain)},ecomPassport:{type:Object,default:()=>a.default}},data:()=>({favoriteIds:[],navTabs:[]}),computed:{i19addresses:()=>Object(r.a)(i.o),i19favorites:()=>Object(r.a)(i.wb),i19hello:()=>Object(r.a)(i.Lb),i19isNotYou:()=>Object(r.a)(i.Yb),i19logout:()=>Object(r.a)(i.fc),i19noSavedFavoritesMsg:()=>Object(r.a)(i.zc),i19orders:()=>Object(r.a)(i.Pc),i19subscriptions:()=>Object(r.a)(i.Wd),i19registration:()=>Object(r.a)(i.od),activeTab:{get(){return this.currentTab||"account"},set(t){this.$emit("update:current-tab",t)}},localCustomer:{get(){return this.customer},set(t){this.$emit("update:customer",t)}},nickname(){return Object(n.a)(this.customer)}},methods:{hasTab(t){return this.navTabs.some((e=>e.value===t))},insertSubscriptionTab(){const t=this.hasTab("subscriptions");this.ecomPassport.checkAuthorization()&&!t&&this.ecomPassport.requestApi("/orders.json?transactions.type=recurrence&limit=1&fields=_id").then((t=>{let{data:e}=t;const{result:s}=e;s.length&&this.navTabs.push({label:this.i19subscriptions,value:"subscriptions"})})).catch(console.error)},login(t){t.checkAuthorization()&&(this.localCustomer=t.getCustomer(),this.$emit("login",t))},logout(){this.ecomPassport.checkLogin()&&(this.ecomPassport.logout(),this.$emit("logout"))}},watch:{customer:{handler(t){const e=this.hasTab("points");Array.isArray(t.loyalty_points_entries)&&t.loyalty_points_entries.length&&!e&&this.navTabs.push({label:"Cashback",value:"points"})},immediate:!0,deep:!0}},created(){if(this.isExternalAuth&&!this.ecomPassport.checkAuthorization())return void(window.location.href="/app/account");this.navTabs=[{label:this.i19registration,value:"account"},{label:this.i19orders,value:"orders"},{label:this.i19favorites,value:"favorites"}];const{favorites:t}=this.ecomPassport.getCustomer();this.favoriteIds=t||[],this.insertSubscriptionTab(),this.ecomPassport.on("login",this.insertSubscriptionTab),this.$once("hook:beforeDestroy",(()=>{this.ecomPassport.off("login",this.insertSubscriptionTab)}))}},d=(s(496),s(71)),m=Object(d.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"account"},[t.localCustomer._id?s("div",{staticClass:"account__logged"},[s("h2",{staticClass:"account__greetings"},[s("i",{staticClass:"i-user-circle"}),t._v(" "+t._s(t.i19hello+" "+t.nickname)+" ")]),s("div",{staticClass:"account__logout"},[t._v(" "+t._s(t.i19isNotYou+"?")+" "),s("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout.apply(null,arguments)}}},[s("i",{staticClass:"i-sign-out"}),t._v(" "+t._s(t.i19logout)+" ")])]),s("ul",{staticClass:"account__nav nav nav-tabs"},t._l(t.navTabs,(function(e){var a=e.label,o=e.value;return s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link",class:t.activeTab===o?"active":null,attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.activeTab=o}}},[t._v(" "+t._s(a)+" ")])])})),0),s("div",{staticClass:"account__content"},[s("transition",{attrs:{"enter-active-class":"animated fadeInLeft slow","leave-active-class":"animated fadeOutLeft"}},["account"!==t.currentTab&&t.currentTab?t._e():s("div",[t._t("registration",(function(){return[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-7"},[t._t("account-form")],2),s("div",{staticClass:"col-md-5 mt-3 mt-md-0"},[s("h4",[t._v(t._s(t.i19addresses))]),t._t("account-addresses")],2)])]}))],2)]),s("transition",{attrs:{"enter-active-class":"animated fadeInRight slow","leave-active-class":"animated fadeOutRight position-absolute"}},["orders"===t.currentTab?s("div",[t._t("orders-list")],2):t._e()]),s("transition",{attrs:{"enter-active-class":"animated fadeInRight slow","leave-active-class":"animated fadeOutRight position-absolute"}},["favorites"===t.currentTab?s("div",[t._t("favorites",(function(){return[t.favoriteIds.length?s("recommended-items",{attrs:{"product-ids":t.favoriteIds}}):s("div",[t._v(" "+t._s(t.i19noSavedFavoritesMsg)+" ")])]}))],2):t._e()]),s("transition",{attrs:{"enter-active-class":"animated fadeInRight slow","leave-active-class":"animated fadeOutRight position-absolute"}},["points"===t.currentTab?s("div",[t._t("account-points")],2):t._e()]),s("transition",{attrs:{"enter-active-class":"animated fadeInRight slow","leave-active-class":"animated fadeOutRight position-absolute"}},["subscriptions"===t.currentTab?s("div",[t._t("subscriptions")],2):t._e()])],1)]):s("login-block",{staticClass:"account__login",attrs:{"can-accept-guest":!1},on:{login:t.login}})],1)}),[],!1,null,null,null),p=m.exports,_=s(377),f=s(394),g=(s(20),s(241),s(59)),h=s(109),v={name:"AccountPoints",props:{customer:{type:Object,default:()=>({})}},computed:{i19available:()=>Object(r.a)(i.s),i19loyaltyPoints:()=>Object(r.a)(i.hc),i19pointsEarned:()=>Object(r.a)(i.Yc),i19upTo:()=>Object(r.a)(i.le),validPointsEntries(){const t=this.customer.loyalty_points_entries;return t?t.filter((t=>{const e=t.valid_thru;return(!e||new Date(e).getTime()>=Date.now())&&t.active_points>0})):[]},totalPoints(){return this.validPointsEntries.length?this.validPointsEntries.reduce(((t,e)=>t+e.active_points),0):0},totalCashback(){return this.validPointsEntries.length?this.validPointsEntries.reduce(((t,e)=>t+e.active_points*e.ratio),0):0}},methods:{formatDate:g.a,formatMoney:h.a}},b=(s(498),Object(d.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.validPointsEntries.length?s("div",{staticClass:"account-points"},[s("div",{staticClass:"account-points__info"},[s("h4",[t._v(t._s(t.i19loyaltyPoints))]),s("span",[t._v(t._s(t.i19available)+": "),s("b",[t._v(t._s(t.totalPoints.toFixed(1)))]),t._v(" / Cashback: "),s("b",[t._v(t._s(t.formatMoney(t.totalCashback)))])])]),s("ul",{staticClass:"list-group"},t._l(t.validPointsEntries,(function(e){return s("li",{staticClass:"list-group-item account-points__entry"},[s("div",{staticClass:"account-points__entry-title"},[s("h5",{staticClass:"mb-1"},[t._v(" "+t._s(e.name)+" ")]),e.valid_thru?s("small",[t._v(" "+t._s(t.i19upTo)+" "+t._s(t.formatDate(e.valid_thru))+" ")]):t._e()]),t._v(" "+t._s(t.i19available)+": "),s("b",[t._v(t._s(e.active_points.toFixed(1)))]),e.earned_points?s("small",{staticClass:"text-muted"},[t._v(" / "+t._s(e.earned_points.toFixed(1)+" "+t.i19pointsEarned)+" ")]):t._e(),s("div",{staticClass:"account-points__cashback"},[t._v(" Cashback: "),s("b",[t._v(t._s(t.formatMoney(e.active_points*e.ratio)))])])])})),0)]):t._e()}),[],!1,null,null,null).exports),C=s(332),A={name:"EcOrdersList",components:{EcOrderInfo:s(337).a,APagination:C.default},props:{mergeDictionary:{type:Object,default:()=>{}},ecomPassport:{type:Object,default:()=>a.default},ordersListParams:{type:String,default:""},isSubscriptions:Boolean},data:()=>({updateInterval:null,orders:[],totalOrders:0,currentPage:1,pageSize:10}),computed:{i19active:()=>Object(r.a)(i.h),i19inactive:()=>Object(r.a)(i.Rb)},methods:{formatDate:g.a,formatMoney:h.a,i19FinancialStatus:t=>Object(r.a)(i.a)[t],i19FulfillmentStatus:t=>Object(r.a)(i.b)[t],i19OrderStatus:t=>Object(r.a)(i.e)[t],updateOrders(){return this.ecomPassport.fetchOrdersList((this.currentPage-1)*this.pageSize).then((t=>{this.orders=t})).catch(console.error)}},created(){const t=()=>{this.updateInterval=setInterval(this.updateOrders,7e3)};this.ecomPassport.checkAuthorization()?this.ecomPassport.requestApi(`/orders.json?${this.ordersListParams}`).then((t=>{let{data:e}=t;const{result:s}=e;this.ecomPassport.setCustomer({orders:s}),this.updateOrders(),this.totalOrders=s.length})).catch(this.updateOrders).finally(t):(this.updateOrders(),t())},watch:{currentPage(){this.updateOrders()}},beforeDestroy(){clearInterval(this.updateInterval)}},y=(s(500),Object(d.a)(A,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orders-list"},[t._l(t.orders,(function(e){return t.orders.length?s("div",{staticClass:"list-group list-group-flush"},[s("a",{staticClass:"orders-list__item list-group-item list-group-item-action",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),function(){return t.$emit("click:order",e)}.apply(null,arguments)}}},[s("div",[s("samp",{staticClass:"orders-list__number",class:"orders-list__number--"+e.status,domProps:{textContent:t._s("#"+e.number)}}),e.amount?s("strong",{staticClass:"orders-list__amount"},[t._v(" "+t._s(t.formatMoney(e.amount.total))+" ")]):t._e()]),s("span",[t._v(t._s(t.formatDate(e.created_at)))]),t.isSubscriptions?s("span",{staticClass:"orders-list__status",class:"orders-list__status--"+e.status},[t._v(" "+t._s("cancelled"===e.status?t.i19inactive:t.i19active)+" ")]):"cancelled"!==e.status&&e.financial_status?"paid"===e.financial_status.current&&e.fulfillment_status?s("span",{staticClass:"orders-list__fulfillment-status",class:"orders-list__fulfillment-status--"+e.fulfillment_status.current},[t._v(" "+t._s(t.i19FulfillmentStatus(e.fulfillment_status.current))+" ")]):s("span",{staticClass:"orders-list__financial-status",class:"orders-list__financial-status--"+e.financial_status.current},[t._v(" "+t._s(t.i19FinancialStatus(e.financial_status.current))+" ")]):s("span",{staticClass:"orders-list__status",class:"orders-list__status--"+e.status},[t._v(" "+t._s(t.i19OrderStatus(e.status))+" ")])])]):t._e()})),t.totalOrders>1?s("a-pagination",{staticClass:"mt-3",attrs:{"total-items":t.totalOrders,page:t.currentPage,"page-size":t.pageSize},on:{"update:page":function(e){t.currentPage=e}}}):t._e()],2)}),[],!1,null,null,null)),w=y.exports,x={name:"account",components:{TheAccount:p,AccountForm:_.a,AccountAddresses:f.a,AccountPoints:b,EcOrdersList:w},data:()=>({isMounted:!1,ecomPassport:a.default}),computed:{customer:{get(){return this.$store.getters.customer},set(t){this.setCustomer(t);const{ecomPassport:e}=this;e&&e.checkAuthorization()&&this.isMounted&&(this.triggerLoading(!0),this.saveCustomer({ecomPassport:e}).finally((()=>this.triggerLoading(!1))))}},currentTab:{get(){return this.$route.params.tab},set(t){t!==this.$route.params.tab&&this.$router.push({name:"account",params:{tab:t}})}}},methods:{...Object(o.d)(["triggerLoading","setCustomer","resetAccount"]),...Object(o.b)(["fetchCustomer","saveCustomer"]),login(t){this.ecomPassport=t,this.triggerLoading(!0),this.fetchCustomer({ecomPassport:t}).finally((()=>this.triggerLoading(!1)))},viewOrder(t){let{_id:e,number:s}=t;s&&this.$router.push({name:"order",params:{number:s,id:e}})}},created(){Boolean(window.$firebaseConfig&&window.$firebaseConfig.authDomain)&&!this.ecomPassport.checkAuthorization()&&setTimeout((()=>{this.ecomPassport.checkAuthorization()||(window.location.href="/app/account")}),1e3)},mounted(){this.isMounted=!0}},k=Object(d.a)(x,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"account"}},[s("the-account",{attrs:{"ecom-passport":t.ecomPassport,customer:t.customer,"current-tab":t.currentTab},on:{"update:customer":function(e){t.customer=e},"update:currentTab":function(e){t.currentTab=e},"update:current-tab":function(e){t.currentTab=e},login:t.login,logout:t.resetAccount},scopedSlots:t._u([{key:"account-form",fn:function(){return[s("account-form",{attrs:{customer:t.customer},on:{"update:customer":function(e){t.customer=e}}})]},proxy:!0},{key:"account-addresses",fn:function(){return[s("account-addresses",{attrs:{customer:t.customer},on:{"update:customer":function(e){t.customer=e}}})]},proxy:!0},{key:"account-points",fn:function(){return[s("account-points",{attrs:{customer:t.customer},on:{"update:customer":function(e){t.customer=e}}})]},proxy:!0},{key:"orders-list",fn:function(){return[s("ec-orders-list",{attrs:{"ecom-passport":t.ecomPassport},on:{"click:order":t.viewOrder}})]},proxy:!0},{key:"subscriptions",fn:function(){return[s("ec-orders-list",{attrs:{"ecom-passport":t.ecomPassport,"orders-list-params":"transactions.type=recurrence","is-subscriptions":!0},on:{"click:order":t.viewOrder}})]},proxy:!0}])})],1)}),[],!1,null,null,null);e.default=k.exports}}]);